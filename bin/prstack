#!/usr/bin/env bb

(def script-dir (-> *file*
                  java.io.File.
                  .getParent
                  java.io.File.
                  .getParent))

(require '[babashka.classpath :as cp])
(cp/add-classpath (str script-dir "/src"))

(require
  '[prstack.utils :as utils]
  '[prstack.commands :as commands])

(defn -main [& _args]
  (println (utils/colorize :bold (utils/colorize :green "ðŸš€ PR Stacker\n")))

  (case (first *command-line-args*)
    "list" (commands/list-stack)
    "create" (commands/create-prs)
    "machete" (commands/write-machete-file)
    (do
      (println (utils/colorize :red "Error") "unknown command" (first *command-line-args*))
      (System/exit 1))))

(-main)

