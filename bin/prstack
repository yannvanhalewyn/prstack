#!/usr/bin/env bb

(def script-dir (-> *file*
                  java.io.File.
                  .getParent
                  java.io.File.
                  .getParent))

(require '[babashka.classpath :as cp])
(cp/add-classpath (str script-dir "/src"))

(require
  '[prstack.utils :as utils]
  '[prstack.commands :as commands])

(defn -main [& _args]
  (let [args *command-line-args*
        command (first args)]
    (case command
      "list" (commands/list-stack (some #{"--include-prs"} args))
      "create" (commands/create-prs)
      "sync" (commands/sync)
      "machete" (commands/write-machete-file)
      (do
        (println (utils/colorize :red "Error") "unknown command" command)
        (System/exit 1)))))

(-main)

